# æŒ‚å·æ¥å£æµ‹è¯•æŒ‡å—

## ğŸ“‹ æ¥å£åˆ—è¡¨

### 1. åˆ›å»ºé¢„çº¦ï¼ˆæŒ‚å·ï¼‰
- **URL**: `POST http://localhost:8080/api/appointments`
- **è¯·æ±‚å‚æ•°**:
```json
{
  "patientId": 1,
  "scheduleId": 1,
  "appointmentNumber": 1
}
```

### 2. è·å–æ‚£è€…æ‰€æœ‰é¢„çº¦
- **URL**: `GET http://localhost:8080/api/appointments/patient/{patientId}`
- **ç¤ºä¾‹**: `GET http://localhost:8080/api/appointments/patient/1`

### 3. è·å–å³å°†å°±è¯Šçš„é¢„çº¦
- **URL**: `GET http://localhost:8080/api/appointments/patient/{patientId}/upcoming`
- **ç¤ºä¾‹**: `GET http://localhost:8080/api/appointments/patient/1/upcoming`

### 4. è·å–é¢„çº¦è¯¦æƒ…
- **URL**: `GET http://localhost:8080/api/appointments/{appointmentId}`
- **ç¤ºä¾‹**: `GET http://localhost:8080/api/appointments/1`

### 5. å–æ¶ˆé¢„çº¦
- **URL**: `PUT http://localhost:8080/api/appointments/{appointmentId}/cancel`
- **ç¤ºä¾‹**: `PUT http://localhost:8080/api/appointments/1/cancel`

### 6. æ›´æ–°é¢„çº¦ä¿¡æ¯
- **URL**: `PUT http://localhost:8080/api/appointments/{appointmentId}`
- **è¯·æ±‚å‚æ•°**:
```json
{
  "appointmentNumber": 2,
  "status": "CONFIRMED",
  "paymentStatus": "PAID",
  "paymentMethod": "æ”¯ä»˜å®",
  "transactionId": "TXN123456789"
}
```

### 7. æ”¯ä»˜æŒ‚å·è´¹ç”¨
- **URL**: `POST http://localhost:8080/api/appointments/{appointmentId}/pay`
- **è¯·æ±‚å‚æ•°**:
```json
{
  "paymentStatus": "PAID",
  "paymentMethod": "å¾®ä¿¡æ”¯ä»˜",
  "transactionId": "WX123456789"
}
```

---

## ğŸ”§ æµ‹è¯•æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ cURL å‘½ä»¤ï¼ˆå‘½ä»¤è¡Œï¼‰

#### 1. åˆ›å»ºé¢„çº¦
```bash
curl -X POST http://localhost:8080/api/appointments \
  -H "Content-Type: application/json" \
  -d "{\"patientId\":1,\"scheduleId\":1,\"appointmentNumber\":1}"
```

#### 2. è·å–æ‚£è€…æ‰€æœ‰é¢„çº¦
```bash
curl -X GET http://localhost:8080/api/appointments/patient/1
```

#### 3. è·å–å³å°†å°±è¯Šçš„é¢„çº¦
```bash
curl -X GET http://localhost:8080/api/appointments/patient/1/upcoming
```

#### 4. è·å–é¢„çº¦è¯¦æƒ…
```bash
curl -X GET http://localhost:8080/api/appointments/1
```

#### 5. å–æ¶ˆé¢„çº¦
```bash
curl -X PUT http://localhost:8080/api/appointments/1/cancel
```

#### 6. æ”¯ä»˜æŒ‚å·è´¹ç”¨
```bash
curl -X POST http://localhost:8080/api/appointments/1/pay \
  -H "Content-Type: application/json" \
  -d "{\"paymentStatus\":\"PAID\",\"paymentMethod\":\"å¾®ä¿¡æ”¯ä»˜\",\"transactionId\":\"WX123456789\"}"
```

---

### æ–¹æ³•äºŒï¼šä½¿ç”¨ PowerShellï¼ˆWindows æ¨èï¼‰

#### 1. åˆ›å»ºé¢„çº¦
```powershell
$body = @{
    patientId = 1
    scheduleId = 1
    appointmentNumber = 1
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:8080/api/appointments" `
    -Method POST `
    -ContentType "application/json" `
    -Body $body
```

#### 2. è·å–æ‚£è€…æ‰€æœ‰é¢„çº¦
```powershell
Invoke-RestMethod -Uri "http://localhost:8080/api/appointments/patient/1" -Method GET
```

#### 3. æ”¯ä»˜æŒ‚å·è´¹ç”¨
```powershell
$paymentData = @{
    paymentStatus = "PAID"
    paymentMethod = "å¾®ä¿¡æ”¯ä»˜"
    transactionId = "WX123456789"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:8080/api/appointments/1/pay" `
    -Method POST `
    -ContentType "application/json" `
    -Body $paymentData
```

---

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ Postman

1. æ‰“å¼€ Postman
2. åˆ›å»ºæ–°çš„è¯·æ±‚
3. é€‰æ‹©å¯¹åº”çš„ HTTP æ–¹æ³•ï¼ˆGET/POST/PUTï¼‰
4. è¾“å…¥ URL
5. åœ¨ Body ä¸­é€‰æ‹© "raw" å’Œ "JSON"ï¼Œè¾“å…¥è¯·æ±‚å‚æ•°
6. ç‚¹å‡» "Send" å‘é€è¯·æ±‚

---

## ğŸ“Š æšä¸¾å€¼è¯´æ˜

### AppointmentStatusï¼ˆé¢„çº¦çŠ¶æ€ï¼‰
- `PENDING` - å¾…ç¡®è®¤
- `CONFIRMED` - å·²ç¡®è®¤
- `CANCELLED` - å·²å–æ¶ˆ
- `COMPLETED` - å·²å®Œæˆ
- `NO_SHOW` - çˆ½çº¦

### PaymentStatusï¼ˆæ”¯ä»˜çŠ¶æ€ï¼‰
- `UNPAID` - æœªæ”¯ä»˜
- `PAID` - å·²æ”¯ä»˜
- `REFUNDED` - å·²é€€æ¬¾

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨**ï¼šåç«¯æœåŠ¡éœ€è¦è¿è¡Œåœ¨ `http://localhost:8080`
2. **æ•°æ®åº“ä¸­éœ€è¦æœ‰æ•°æ®**ï¼š
   - æ‚£è€…ä¿¡æ¯ï¼ˆPatientï¼‰
   - æ’ç­ä¿¡æ¯ï¼ˆScheduleï¼‰
3. **æµ‹è¯•å‰å…ˆæŸ¥è¯¢å¯ç”¨çš„æ•°æ®**ï¼š
   - å…ˆæŸ¥è¯¢æ‚£è€…ID: `GET http://localhost:8080/api/patients`
   - å†æŸ¥è¯¢æ’ç­ID: `GET http://localhost:8080/api/schedules`
4. **æ³¨æ„IDçš„æ•°æ®ç±»å‹**ï¼š
   - `patientId`: Long
   - `scheduleId`: Integer
   - `appointmentId`: Integer

---

## ğŸ¯ æµ‹è¯•æµç¨‹å»ºè®®

### å®Œæ•´æµ‹è¯•æµç¨‹ï¼š

1. **å‡†å¤‡æ•°æ®** - ç¡®è®¤æ•°æ®åº“ä¸­æœ‰æ‚£è€…å’Œæ’ç­æ•°æ®
2. **åˆ›å»ºé¢„çº¦** - ä½¿ç”¨ POST /api/appointments
3. **æŸ¥è¯¢é¢„çº¦** - ä½¿ç”¨ GET /api/appointments/patient/{patientId}
4. **æŸ¥çœ‹è¯¦æƒ…** - ä½¿ç”¨ GET /api/appointments/{appointmentId}
5. **æ”¯ä»˜è´¹ç”¨** - ä½¿ç”¨ POST /api/appointments/{appointmentId}/pay
6. **å–æ¶ˆé¢„çº¦**ï¼ˆå¯é€‰ï¼‰- ä½¿ç”¨ PUT /api/appointments/{appointmentId}/cancel

---

## ğŸ› å¸¸è§é”™è¯¯å¤„ç†

### é”™è¯¯ 1ï¼š404 Not Found
- æ£€æŸ¥URLæ˜¯å¦æ­£ç¡®
- æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
- æ£€æŸ¥ç«¯å£å·æ˜¯å¦æ­£ç¡®

### é”™è¯¯ 2ï¼š400 Bad Request
- æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥å¿…å¡«å­—æ®µæ˜¯å¦éƒ½æä¾›äº†
- æ£€æŸ¥æ•°æ®ç±»å‹æ˜¯å¦åŒ¹é…

### é”™è¯¯ 3ï¼š500 Internal Server Error
- æ£€æŸ¥æ•°æ®åº“è¿æ¥
- æ£€æŸ¥patientIdå’ŒscheduleIdæ˜¯å¦å­˜åœ¨
- æŸ¥çœ‹åç«¯æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

