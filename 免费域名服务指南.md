# 免费域名服务指南

## 🎯 免费域名服务选项

### ⚠️ 重要提示

免费域名通常有以下限制：
- 可能不稳定，随时可能停止服务
- 部分免费域名不被微信小程序接受
- 续费可能收费
- 功能可能受限

**建议**：如果用于正式项目，还是购买付费域名更稳定（`.com` 约55-69元/年）。

---

## 🌐 免费域名服务列表

### 方案一：DNSHE - 推荐（国内）

**状态**：✅ 可用

**说明**：
- 提供永久免费的域名注册与DNS解析服务
- 支持多种DNS记录类型
- 适合开发者、学生和开源爱好者
- 访问：https://www.dnshe.com/

**特点**：
- ✅ 永久免费
- ✅ 支持多种DNS记录
- ✅ 国内服务，访问速度快
- ⚠️ 域名后缀可能有限制

### 方案二：Freenom（.tk, .ml, .ga, .cf 等）

**状态**：⚠️ 部分可用（可能不稳定）

**说明**：
- 提供 `.tk`、`.ml`、`.ga`、`.cf`、`.gq` 等免费域名
- 注册期限为12个月，可续费
- 访问：https://www.freenom.com/

**注意**：
- ⚠️ 服务可能不稳定
- ⚠️ 部分域名可能不被微信小程序接受
- ⚠️ 续费可能需要验证

---

### 方案三：Dot TK

**状态**：✅ 可用

**说明**：
- 专注于 `.tk` 后缀的免费域名注册
- 用户可以自定义域名
- 访问：https://www.dot.tk/

**特点**：
- ✅ 免费注册
- ⚠️ 只支持 `.tk` 后缀
- ⚠️ 可能不被所有服务接受

### 方案四：Biz.nf

**状态**：✅ 可用

**说明**：
- 提供 `.com`、`.net`、`.org`、`.eu` 等后缀的免费域名
- 访问：https://www.biz.nf/

**注意**：
- ⚠️ 可能显示广告
- ⚠️ 所有权可能有限制
- ⚠️ 稳定性可能不足

### 方案五：Cloudflare（DNS服务）

**状态**：✅ 可用（但需要先购买付费域名）

**说明**：
- Cloudflare 提供免费的 DNS 服务
- 如果你有其他域名，可以免费使用 Cloudflare 的 DNS 和 CDN
- 不直接提供免费域名注册

---

### 方案六：GitHub Pages / Vercel 等平台域名

**状态**：✅ 可用（但有限制）

**说明**：
- GitHub Pages：提供 `yourname.github.io` 子域名
- Vercel：提供 `yourname.vercel.app` 子域名
- Netlify：提供 `yourname.netlify.app` 子域名

**限制**：
- 只能用于静态网站或特定平台
- 不适合用于 API 服务
- 微信小程序可能不接受这些域名

---

### 方案七：华为云API网关测试域名（推荐用于测试）

**状态**：✅ 可用

**说明**：
- 华为云 API 网关提供免费的测试域名
- 格式：`xxxxx.apigw.huaweicloud.com`
- 自带 HTTPS 证书
- 适合临时测试

**配置步骤**：

1. **创建API网关**
   - 在华为云控制台搜索：**API网关 APIG**
   - 或访问：https://console.huaweicloud.com/apig/
   - 点击 **创建API分组**

2. **获取测试域名**
   - 创建分组后，系统会自动分配一个测试域名
   - 格式：`xxxxx.apigw.huaweicloud.com`
   - 这个域名自带 HTTPS 证书

3. **配置API**
   - 创建API，后端指向你的ECS服务器（IP:端口）
   - 配置请求路径和转发规则

4. **使用测试域名**
   - 直接使用API网关提供的域名
   - 在微信公众平台配置该域名

**优点**：
- ✅ 完全免费
- ✅ 自带HTTPS证书
- ✅ 无需购买域名
- ✅ 配置简单

**缺点**：
- ⚠️ 域名较长，不够专业
- ⚠️ 可能不稳定（测试域名）
- ⚠️ 可能有流量限制

---

### 方案八：内网穿透工具（临时测试）

**状态**：✅ 可用

**说明**：
- 提供临时的 HTTPS 域名
- 适合本地开发测试
- 不适合生产环境

**推荐工具**：

#### 1. ngrok（推荐）

**特点**：
- 提供免费 HTTPS 域名
- 格式：`xxxxx.ngrok.io` 或 `xxxxx.ngrok-free.app`
- 免费版有连接数限制

**使用步骤**：
1. 访问：https://ngrok.com/
2. 注册账号（免费）
3. 下载客户端
4. 运行：`ngrok http 8080`（8080是你的Spring Boot端口）
5. 获得临时域名：`https://xxxxx.ngrok-free.app`

**配置到小程序**：
- 在微信公众平台配置该域名
- 注意：免费版域名每次启动可能不同

#### 2. natapp（国内）

**特点**：
- 国内服务，速度较快
- 提供免费隧道
- 格式：`xxxxx.natapp1.cc`

**使用步骤**：
1. 访问：https://natapp.cn/
2. 注册账号
3. 创建免费隧道
4. 下载客户端并运行
5. 获得临时域名

#### 3. frp（自建）

**特点**：
- 完全免费，需要自己搭建服务器
- 需要一台有公网IP的服务器
- 配置较复杂

---

### 方案九：使用子域名服务

**状态**：✅ 可用（如果你有其他域名）

**说明**：
- 如果你有其他域名（如个人网站域名）
- 可以创建子域名：`api.yourdomain.com`
- 完全免费，只需配置DNS解析

---

## 🎯 推荐方案对比

| 方案 | 免费 | 稳定性 | 配置难度 | 适合场景 |
|------|------|--------|----------|----------|
| DNSHE | ✅ | ⭐⭐⭐ | ⭐⭐ | 长期使用 |
| 华为云API网关 | ✅ | ⭐⭐⭐ | ⭐⭐ | 体验版测试 |
| Freenom | ✅ | ⭐⭐ | ⭐⭐ | 临时使用 |
| ngrok | ✅ | ⭐⭐ | ⭐ | 本地开发测试 |
| natapp | ✅ | ⭐⭐ | ⭐ | 本地开发测试 |
| 购买域名 | ❌ | ⭐⭐⭐⭐⭐ | ⭐⭐ | 正式使用 |

---

## 🚀 快速开始：使用DNSHE免费域名（推荐）

### 步骤1：注册DNSHE账号

1. 访问：https://www.dnshe.com/
2. 注册账号（免费）
3. 完成邮箱验证

### 步骤2：注册免费域名

1. 登录DNSHE控制台
2. 查找"域名注册"或"免费域名"
3. 输入想要的域名前缀
4. 选择可用的免费后缀
5. 完成注册

### 步骤3：配置DNS解析

1. 在DNSHE控制台找到你的域名
2. 添加A记录：
   - 主机记录：`api`（或留空）
   - 类型：A
   - 记录值：你的华为云EIP地址
   - TTL：300

### 步骤4：申请SSL证书

1. 在华为云申请免费SSL证书
2. 域名填写：`api.yourdomain.dnshe.com`（你的完整域名）
3. 选择自动DNS验证
4. 等待验证通过并下载证书

### 步骤5：配置HTTPS

参考 `华为云域名配置快速步骤.md` 中的服务器配置部分。

---

## 🚀 快速开始：使用华为云API网关（最简单）

### 步骤1：创建API网关分组

1. 在华为云控制台搜索：**API网关 APIG**
2. 点击 **创建API分组**
3. 填写分组名称（如：`hospital-api`）
4. 系统会自动分配测试域名

### 步骤2：创建API

1. 在分组中点击 **创建API**
2. 配置：
   - **请求路径**：`/{path}`（或具体路径）
   - **请求方法**：GET、POST等
   - **后端服务类型**：HTTP
   - **后端服务地址**：`http://你的EIP:8080`
   - **后端请求路径**：`/{path}`

3. 发布API

### 步骤3：配置到小程序

1. 复制API网关提供的测试域名（格式：`xxxxx.apigw.huaweicloud.com`）
2. 在微信公众平台配置该域名
3. 修改小程序配置：

```javascript
// uni_app/config/index.js
const production = {
	baseURL: 'https://xxxxx.apigw.huaweicloud.com',  // 👈 API网关域名
	aiBaseURL: 'https://xxxxx.apigw.huaweicloud.com'
}

const USE_PRODUCTION = true
```

---

## 🚀 快速开始：使用ngrok（本地测试）

### 步骤1：注册ngrok

1. 访问：https://ngrok.com/
2. 注册免费账号
3. 获取authtoken

### 步骤2：安装并运行

```bash
# 下载ngrok（Windows）
# 从官网下载并解压

# 配置authtoken
ngrok config add-authtoken YOUR_AUTHTOKEN

# 启动隧道（8080是你的Spring Boot端口）
ngrok http 8080
```

### 步骤3：使用域名

- ngrok会显示一个HTTPS域名，如：`https://xxxxx.ngrok-free.app`
- 在微信公众平台配置该域名
- 注意：免费版每次启动域名可能不同

---

## ⚠️ 注意事项

### 微信小程序域名要求

1. **必须使用HTTPS**：所有免费域名方案都支持HTTPS
2. **必须在微信公众平台配置**：体验版也需要配置
3. **域名稳定性**：免费域名可能不稳定，建议用于测试

### 免费域名的限制

1. **可能随时停止服务**
2. **可能有流量限制**
3. **域名不够专业**
4. **可能不被某些服务接受**

---

## 💡 建议

### 如果只是体验版测试：
- ✅ 使用 **华为云API网关测试域名**（最简单）
- ✅ 或使用 **ngrok**（本地开发）

### 如果要正式使用：
- 💰 建议购买付费域名（`.com` 约55-69元/年）
- 更稳定、更专业、更可靠

---

## 📋 各方案详细配置

### 华为云API网关配置

详细步骤请参考：
- `华为云域名配置快速步骤.md` 中的API网关部分

### ngrok配置

1. 访问：https://ngrok.com/
2. 注册并获取authtoken
3. 下载客户端
4. 运行：`ngrok http 8080`
5. 使用显示的HTTPS域名

### natapp配置

1. 访问：https://natapp.cn/
2. 注册账号
3. 创建免费隧道
4. 下载客户端
5. 运行并获取域名

---

## ❓ 常见问题

### Q: 免费域名可以用于正式版小程序吗？

**A**: 
- 技术上可以，但不推荐
- 免费域名可能不稳定
- 建议正式版使用付费域名

### Q: 华为云API网关测试域名稳定吗？

**A**: 
- 相对稳定，适合测试
- 但毕竟是测试域名，可能有流量限制
- 正式使用建议购买域名

### Q: ngrok免费版有什么限制？

**A**: 
- 每次启动域名可能不同
- 有连接数限制
- 适合本地开发测试

### Q: 有没有完全免费且稳定的域名？

**A**: 
- 目前没有完全免费且长期稳定的域名服务
- 建议购买付费域名（价格不高，更可靠）

---

## 🎯 总结

**最佳免费方案**：
1. **体验版测试**：华为云API网关测试域名
2. **本地开发**：ngrok 或 natapp
3. **正式使用**：购买付费域名（推荐）

**成本对比**：
- 免费域名：0元，但可能不稳定
- 付费域名：55-69元/年，稳定可靠

建议：如果预算允许，购买一个域名更省心。

