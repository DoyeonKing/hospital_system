# 真机调试网络问题 - 快速解决方案

## 当前状态
- ✅ 后端服务正在运行（8080端口）
- ✅ 后端已配置允许外部访问（0.0.0.0）
- ❌ 手机无法连接（请求超时）

## 最可能的原因：防火墙

### 立即测试（30秒）

**步骤1：临时关闭防火墙**
1. 按 `Win + R`
2. 输入 `firewall.cpl`，回车
3. 点击"启用或关闭 Windows Defender 防火墙"
4. **两个都选"关闭"**（仅测试用）
5. 点击确定
6. **立即测试登录功能**

如果登录成功 → 说明是防火墙问题，继续步骤2
如果还是失败 → 看下面的其他方案

**步骤2：添加防火墙规则（永久解决）**
1. 控制面板 → Windows Defender 防火墙 → 高级设置
2. 入站规则 → 新建规则
3. 选择"端口" → 下一步
4. TCP → 特定本地端口：`8080` → 下一步
5. 允许连接 → 下一步
6. 全部勾选（域、专用、公用）→ 下一步
7. 名称：`SpringBoot 8080端口` → 完成
8. **重新开启防火墙**
9. 测试登录

## 其他可能的原因

### 方案B：检查网络连接

**在手机浏览器测试：**
```
http://172.20.10.3:8080
```

**结果：**
- 能看到页面（即使报错）→ 网络通了，问题在APP配置
- 无法连接 → 网络不通，检查WiFi连接

### 方案C：使用USB连接（最简单）

1. 用USB线连接手机
2. HBuilderX → 运行 → 运行到手机 → USB设备
3. 这样不需要配置IP，直接使用localhost

### 方案D：使用内网穿透工具

如果以上都不行，使用ngrok：

```bash
# 1. 下载ngrok: https://ngrok.com/download
# 2. 运行：
ngrok http 8080
# 3. 会得到一个公网地址，例如：https://xxxx.ngrok.io
# 4. 修改 config/index.js，使用这个地址
```

## 当前配置检查

**config/index.js 中的IP：**
- 当前：`172.20.10.3`（WiFi IP）
- 备用：`192.168.137.1`（手机热点IP）

**确保：**
- 手机和电脑在同一WiFi（如果使用172.20.10.3）
- 或者电脑连接手机热点（如果使用192.168.137.1）

## 测试命令

在电脑上测试后端是否正常：
```bash
curl http://localhost:8080/api/auth/patient/login
```

如果电脑上能访问，说明后端正常，问题在手机网络。


