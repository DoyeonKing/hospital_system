# 体验版发布快速配置指南

## 🚀 三步快速发布体验版

### 第一步：配置生产环境API地址

编辑 `config/index.js` 文件：

```javascript
// 找到这段代码，修改为你的实际API域名
const production = {
	baseURL: 'https://your-api-domain.com',  // 👈 改为你的实际API域名
	aiBaseURL: 'https://your-ai-api-domain.com'  // 👈 改为你的AI服务域名（如果有）
}

// 将 USE_PRODUCTION 改为 true
const USE_PRODUCTION = true  // 👈 改为 true
```

**重要提示**：
- 域名必须使用 `https://` 协议
- 域名必须在微信公众平台配置（开发 → 开发设置 → 服务器域名）

### 第二步：在微信公众平台配置服务器域名

1. 登录 [微信公众平台](https://mp.weixin.qq.com/)
2. 进入 **开发** → **开发管理** → **开发设置**
3. 找到 **服务器域名**，点击 **修改**
4. 添加你的API域名（如：`https://api.yourdomain.com`）
5. 保存配置

### 第三步：编译并上传

1. **使用 HBuilderX 编译**
   - 打开 `uni_app` 项目
   - 点击 **发行** → **小程序-微信**
   - 等待编译完成

2. **使用微信开发者工具上传**
   - 打开编译后的项目（在 `unpackage/dist/build/mp-weixin/`）
   - 点击 **上传** 按钮
   - 填写版本号和备注

3. **设置为体验版**
   - 登录微信公众平台
   - 进入 **版本管理** → **开发版本**
   - 找到刚上传的版本，点击 **选为体验版**

4. **添加体验者**
   - 在 **体验版** 中点击 **体验成员**
   - 添加体验者的微信号

---

## ⚙️ 配置示例

### 示例1：使用云服务器

如果你有云服务器（如阿里云、腾讯云），配置如下：

```javascript
const production = {
	baseURL: 'https://api.yourdomain.com',  // 你的云服务器域名
	aiBaseURL: 'https://ai-api.yourdomain.com'
}
```

### 示例2：使用内网穿透（临时测试）

如果只是临时测试，可以使用内网穿透工具：

```javascript
const production = {
	baseURL: 'https://xxxxx.ngrok.io',  // ngrok提供的临时域名
	aiBaseURL: 'https://xxxxx.ngrok.io'
}
```

**注意**：内网穿透域名不稳定，仅用于临时测试。

### 示例3：使用云服务商提供的测试域名

很多云服务商提供测试域名：

```javascript
const production = {
	baseURL: 'https://your-app.cloud-provider.com',  // 云服务商提供的域名
	aiBaseURL: 'https://your-ai-app.cloud-provider.com'
}
```

---

## 🔄 开发/生产环境切换

### 开发时（本地调试）
```javascript
const USE_PRODUCTION = false  // 使用开发环境
```

### 发布体验版时
```javascript
const USE_PRODUCTION = true  // 使用生产环境
```

**提示**：发布前记得改回 `false`，避免影响本地开发。

---

## ❓ 常见问题

### Q: 我没有域名怎么办？

**A**: 有几种解决方案：
1. **使用云服务商提供的域名**（推荐）
   - 阿里云、腾讯云等都提供免费或低价的域名
   - 通常还提供SSL证书

2. **使用内网穿透工具**（临时方案）
   - ngrok、natapp 等工具提供临时HTTPS域名
   - 仅用于临时测试，不稳定

3. **使用云函数**（如果后端是云函数）
   - 云函数通常提供默认域名

### Q: 域名必须备案吗？

**A**: 
- **体验版**：通常不需要备案（但需要配置到微信公众平台）
- **正式版**：根据小程序类目，部分需要备案

### Q: 如何获取SSL证书？

**A**: 
1. **云服务商提供**（推荐）
   - 阿里云、腾讯云等提供免费SSL证书
   - 通常一键配置

2. **Let's Encrypt**（免费）
   - 提供免费SSL证书
   - 需要自己配置

3. **内网穿透工具**
   - 通常自带SSL证书

### Q: 发布后如何切换回开发环境？

**A**: 
1. 编辑 `config/index.js`
2. 将 `USE_PRODUCTION` 改回 `false`
3. 重新编译即可

---

## 📝 检查清单

发布体验版前，确认：
- [ ] 已修改 `config/index.js` 中的 `production.baseURL` 为实际域名
- [ ] 已修改 `USE_PRODUCTION = true`
- [ ] 已在微信公众平台配置服务器域名
- [ ] 已测试API可以正常访问
- [ ] 已重新编译项目
- [ ] 已上传并设置为体验版
- [ ] 已添加体验者

---

## 💡 提示

- 发布体验版后，记得将 `USE_PRODUCTION` 改回 `false`，避免影响本地开发
- 建议在代码中添加注释，提醒自己发布前需要修改配置
- 可以考虑使用环境变量或构建脚本自动切换环境（高级用法）







