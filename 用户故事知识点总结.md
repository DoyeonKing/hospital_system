# 优秀用户故事知识点总结

## 一、用户故事的基本结构

### 1.1 标准格式
用户故事采用三段式结构：
- **As a** <角色/用户类型>
- **I want** <功能或非功能需求/目标>
- **So that** <达到业务价值>

### 1.2 完整用户故事卡片包含要素
- **Story name**（故事名称）
- **Story ID**（故事ID）
- **用户故事描述**（As a/I want/So that）
- **Priority**（优先级）
- **Date started**（开始日期）
- **Date Finished**（完成日期）
- **Acceptance Criteria**（验收标准，使用Given/When/Then格式）
- **Notes**（备注信息）

### 1.3 验收标准格式（Gherkin）
- **Given** <什么样的条件>
- **When** <采取了什么行动>
- **Then** <得到什么结果>

---

## 二、好故事的原则：INVEST

### 2.1 I - Independent（独立的）
- **原则**：一个用户故事尽可能独立于其他用户故事
- **意义**：减少依赖关系，便于灵活安排和并行开发

### 2.2 N - Negotiable（可讨论的）
- **原则**：在保证价值的情况下，细节在与客户讨论中产生
- **意义**：保持灵活性，避免过早固化需求细节

### 2.3 V - Valuable（有价值的）
- **原则**：必须对客户或用户具有价值
- **意义**：确保每个故事都能带来实际业务价值，而非纯技术实现

### 2.4 E - Estimable（可估计的）
- **原则**：可以估计优先级、工作量，并安排迭代计划
- **意义**：便于项目规划和资源分配

### 2.5 S - Small（小的）
- **原则**：大小刚刚好，确保在一个迭代中能够完成
- **意义**：避免故事过大导致无法在迭代内完成

### 2.6 T - Testable（可测试的）
- **原则**：确认用户故事被开发人员正确地实现了
- **意义**：通过明确的验收标准确保质量

---

## 三、优先级分类：MoSCoW方法

### 3.1 Must have（必须支持）
- **说明**：必须支持，否则系统无法运行
- **特点**：核心功能，不可或缺

### 3.2 Should have（应该支持）
- **说明**：很重要，但也可以省略
- **特点**：重要功能，但不是系统运行的必要条件

### 3.3 Could have（可以支持）
- **说明**：扩展功能，要求不急，可以延后实现
- **特点**：增强功能，可以后续迭代实现

### 3.4 Want to have（想要支持）
- **说明**：只是一部分用户的想法
- **特点**：可选功能，优先级最低

---

## 四、优秀用户故事案例分析

### 4.1 好故事的示例

**示例：设置默认数据集目录**
- **Story name**: 设置默认数据集目录
- **Story ID**: 2022-1
- **As a**: 用户
- **I want**: 有一个默认数据集目录
- **So that**: 当登录系统后，如果默认目录里有测试数据集，则不需要手动选择数据集
- **Priority**: Should have
- **验收标准**：
  1. 第一次登陆时提示用户可以指定一个默认目录
  2. 默认目录无文件时，提示用户手动选择数据集
  3. 默认目录有文件时，提示用户是否使用该目录中的数据集

**为什么这是好故事？**
- ✅ 有明确的用户角色（用户）
- ✅ 有清晰的功能目标（默认数据集目录）
- ✅ 有明确的业务价值（减少手动操作）
- ✅ 大小适中，可以在一个迭代完成
- ✅ 有明确的验收标准

### 4.2 不好的故事示例及问题

#### ❌ 问题1：复合故事
- **示例**："作为线性文档所有者，我希望可以增加、修改和删除多个文档。"
- **问题**：这是一个复合故事，应该拆分成多个故事
- **改进**：拆分为"增加文档"、"修改文档"、"删除文档"三个独立故事

#### ❌ 问题2：故事太大
- **示例**："作为润工作用户，我希望可以搜索历史信息，以便快速查找到想要的信息。"
- **问题**：故事太大，需要拆分
- **改进**：可以按照搜索参数、结果等进行拆分

#### ❌ 问题3：技术导向而非价值导向
- **示例1**："系统将使用K8S进行服务容器化部署。"
- **示例2**："作为开发人员，我希望使用MyBatis作为数据持久化方案。"
- **问题**：故事是关于技术的，应该更多体现对客户或用户的价值
- **改进**：这类内容应作为技术任务分配给开发人员跟踪，而非用户故事

#### ❌ 问题4：不符合Small原则
- **示例**："作为华润网站内容系统审核员，我希望系统可以自动进行敏感词过滤，以避免发布的文章引起法律法规相关问题。"
- **问题**：故事对用户有价值，但太大，不符合Small原则
- **改进**：需要拆分为更小的故事，如"敏感词库管理"、"自动过滤功能"、"过滤结果提示"等

#### ✅ 好故事示例
- **示例**："作为华润公司员工，我希望可以在HR系统修改工资卡。"
- **评价**：这是一个大小适中的故事

---

## 五、编写优秀用户故事的关键要点

### 5.1 用户视角
- 从用户角度描述需求，而非技术实现
- 明确用户角色和用户类型

### 5.2 业务价值
- 每个故事必须能带来明确的业务价值
- 避免纯技术实现的故事

### 5.3 大小适中
- 确保故事可以在一个迭代内完成
- 如果故事太大，需要拆分

### 5.4 独立性
- 尽可能减少故事之间的依赖
- 便于灵活安排开发顺序

### 5.5 明确的验收标准
- 使用Given/When/Then格式
- 确保可测试和可验证

### 5.6 可讨论性
- 保持细节的灵活性
- 通过讨论完善需求

---

## 六、常见错误及避免方法

| 错误类型 | 表现 | 避免方法 |
|---------|------|---------|
| 复合故事 | 一个故事包含多个功能 | 拆分为多个独立故事 |
| 故事过大 | 无法在一个迭代完成 | 按功能模块或参数拆分 |
| 技术导向 | 描述技术实现而非用户价值 | 转换为用户价值描述或作为技术任务 |
| 缺乏价值 | 没有明确的业务价值 | 明确So that部分的业务价值 |
| 依赖过强 | 故事间依赖关系复杂 | 重新设计，提高独立性 |
| 验收标准不明确 | 无法验证是否完成 | 使用Given/When/Then格式明确标准 |

---

## 七、实践建议

1. **从用户价值出发**：始终思考"这个功能为用户带来什么价值？"
2. **保持小而独立**：遵循Small和Independent原则
3. **明确验收标准**：使用Gherkin格式编写验收标准
4. **定期评审**：使用INVEST原则检查故事质量
5. **及时拆分**：发现故事过大或复合时及时拆分
6. **优先级管理**：使用MoSCoW方法合理分配优先级

