# 时间段接口连接测试说明

## 已完成的修改

### 1. 创建了时间段API接口文件
- 文件位置：`vue_admin/src/api/timeslot.js`
- 包含完整的CRUD接口：`getTimeSlots()`, `getTimeSlotById()`, `createTimeSlot()`, `updateTimeSlot()`, `deleteTimeSlot()`

### 2. 修改了ScheduleDashboard.vue
- 移除了硬编码的时间段数据
- 添加了`loadTimeSlots()`函数从API获取数据
- 在`onMounted()`中调用时间段数据加载

## 接口调用流程

1. **页面加载时**：`onMounted()` → `loadTimeSlots()` → `getTimeSlots()` → `/api/timeslots`
2. **数据返回**：后端返回时间段列表，前端更新`timeSlots`响应式数据
3. **界面更新**：红圈区域的时间段卡片会自动显示从数据库获取的数据

## 后端接口要求

确保后端`/api/timeslots`接口返回格式如下：

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "slotId": 1,
      "slotName": "上午08:00-08:30",
      "startTime": "08:00:00",
      "endTime": "08:30:00",
      "period": "上午"
    },
    {
      "slotId": 2,
      "slotName": "上午08:30-09:00", 
      "startTime": "08:30:00",
      "endTime": "09:00:00",
      "period": "上午"
    }
  ]
}
```

## 测试步骤

1. 启动后端服务，确保`/api/timeslots`接口可用
2. 启动前端服务：`npm run dev`
3. 访问排班看板页面：`http://localhost:5173/scheduling/dashboard`
4. 查看红圈区域是否显示从数据库获取的时间段数据
5. 检查浏览器控制台是否有错误信息

## 预期结果

- 红圈区域显示从数据库获取的时间段卡片
- 每个时间段卡片显示：时钟图标 + 时间段名称 + 具体时间
- 时间段按上午/下午分组显示
- 支持拖拽功能到排班表格中

## 故障排除

如果时间段没有显示：
1. 检查后端接口是否正常返回数据
2. 检查浏览器控制台是否有API调用错误
3. 检查网络请求是否成功（F12 → Network标签）
4. 确认数据库中有时间段数据
